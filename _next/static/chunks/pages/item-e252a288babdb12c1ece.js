_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[19],{"88Gu":function(e,t){var n=800,a=16,r=Date.now;e.exports=function(e){var t=0,o=0;return function(){var i=r(),l=a-(i-o);if(o=i,l>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},BiGR:function(e,t,n){var a=n("nmnc"),r=n("03A+"),o=n("Z0cm"),i=a?a.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||r(e)||!!(i&&e&&e[i])}},EA7m:function(e,t,n){var a=n("zZ0H"),r=n("Ioao"),o=n("wclG");e.exports=function(e,t){return o(r(e,t,a),e+"")}},Ioao:function(e,t,n){var a=n("heNW"),r=Math.max;e.exports=function(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,l=r(o.length-t,0),c=Array(l);++i<l;)c[i]=o[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=o[i];return u[t]=n(c),a(e,this,u)}}},XGnz:function(e,t,n){var a=n("CH3K"),r=n("BiGR");e.exports=function e(t,n,o,i,l){var c=-1,u=t.length;for(o||(o=r),l||(l=[]);++c<u;){var s=t[c];n>0&&o(s)?n>1?e(s,n-1,o,i,l):a(l,s):i||(l[l.length]=s)}return l}},cvCv:function(e,t){e.exports=function(e){return function(){return e}}},heNW:function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},"mv/X":function(e,t,n){var a=n("ljhN"),r=n("MMmD"),o=n("wJg7"),i=n("GoyQ");e.exports=function(e,t,n){if(!i(n))return!1;var l=typeof t;return!!("number"==l?r(n)&&o(t,n.length):"string"==l&&t in n)&&a(n[t],e)}},nQQX:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n("rePB"),r=n("q1tI"),o=n.n(r),i=n("Z3vd"),l=n("kfFl"),c=n("yv+Y"),u=n("+JwS"),s=n("W+MB"),d=n("3hq0"),p=o.a.createElement;function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={url:{type:"hidden"},action:{type:"hidden"},target:{type:"hidden"},recipient:{type:"hidden"}};function g(e){var t=e.title,n=e.description,a=e.buttonIcon,m=e.buttonVariant,g=e.url,b=e.action,y=e.target,v=e.recipient,w=e.fields,O=Object(r.useContext)(s.a)[0],j=Object(r.useState)(!1),_=j[0],C=j[1];return p(o.a.Fragment,null,p(i.a,{size:"small",color:"primary",variant:m||"outlined",startIcon:a,onClick:function(){return C(!0)}},t),O&&O.name&&p(d.a,{open:_,setOpen:C,title:t,description:n,source:{url:g||window.location.href,action:b,target:y,recipient:v},fields:f(f({},w),h),method:"POST",url:"/actions",namespace:"action"}),(!O||!O.name)&&p(l.a,{open:_,onClose:function(){return C(!1)}},p(c.a,null,"Please log in first"),p(u.a,null,p(i.a,{onClick:function(){return C(!1)},autoFocus:!0},"Ok"))))}},o4QW:function(e,t,n){"use strict";var a=n("wx14"),r=n("Ff2n"),o=n("q1tI"),i=(n("17x9"),n("iuhU")),l=n("H2TA"),c=o.forwardRef((function(e,t){var n=e.disableSpacing,l=void 0!==n&&n,c=e.classes,u=e.className,s=Object(r.a)(e,["disableSpacing","classes","className"]);return(o.createElement("div",Object(a.a)({className:Object(i.a)(c.root,u,!l&&c.spacing),ref:t},s)))}));t.a=Object(l.a)({root:{display:"flex",alignItems:"center",padding:8},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiCardActions"})(c)},pFRH:function(e,t,n){var a=n("cvCv"),r=n("O0oS"),o=n("zZ0H"),i=r?function(e,t){return r(e,"toString",{configurable:!0,enumerable:!1,value:a(t),writable:!0})}:o;e.exports=i},pPlg:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return te}));var a=n("wx14"),r=n("q1tI"),o=n.n(r),i=n("hlFM"),l=n("tRbT"),c=n("30+C"),u=n("lFIR"),s=n("Ie8z"),d=n("9jPY"),p=n("Z3vd"),m=n("NrVZ"),f=n("o4QW"),h=n("eD//"),g=n("tVbE"),b=n("IsqK"),y=n("nOHt"),v=n("cr+I"),w=n.n(v),O=n("Xdxp"),j=n.n(O),_=n("gb7j"),C=n.n(_),k=n("xweI"),x=n.n(k),P=n("kfFl"),S=n("EQI2"),F=n("yv+Y"),I=n("+JwS"),N=n("6C/C"),E=n("LvTE"),L=n("Kpcq"),A=n("ENrC"),T=n("1iKp"),H=n.n(T),M=n("ofer"),V=n("qEN/"),R=n.n(V),q=n("e5ou"),D=n("AesL"),z=n("h7RS"),G=n("oZqh"),Q=n("hlie"),Z=o.a.createElement,B="CC BY 2.5 AU";function X(e){var t=e.license,n=void 0===t?B:t;return n===B?Z(Q.a,{href:"https://creativecommons.org/licenses/by/2.5/au/"},n):Z(o.a.Fragment,null,n)}var U=n("nQQX"),W=n("sW4n"),Y=n("gMjp"),J=o.a.createElement;function K(e){var t=e.original_url,n=e.thumbnail_url,a=e.source,r=e.href;return"flickr"===a?J(o.a.Fragment,null,J("a",{"data-flickr-embed":"true",href:r},J("img",{src:n,width:"640",height:"360",alt:""}))):t?J("video",{key:t,controls:!0,src:t,poster:n,style:{width:"100%"}},"[Video Not Supported]"):J(o.a.Fragment,null,"[Video Not Supported]")}var $=o.a.createElement,ee=function(e){var t=e.title,n=e.children,a=e.actions;return $(N.a,{defaultExpanded:!0},$(E.a,{expandIcon:$(H.a,null)},$(M.a,{variant:"h3"},t)),$(L.a,null,$("div",{style:{width:"100%"}},n)),a&&$(A.a,null,a))};function te(){var e=Object(y.useRouter)(),t=Object(r.useState)(),n=t[0],v=t[1],O=Object(r.useState)(),_=O[0],k=O[1],N=Object(r.useState)(null),E=N[0],L=N[1],A=Object(r.useState)(null),T=A[0],H=A[1],M=Object(r.useState)(null),V=M[0],Q=M[1],Z=Object(r.useState)(null),B=Z[0],J=Z[1],te=Object(r.useState)(!1),ne=te[0],ae=te[1],re=Object(r.useState)(!1),oe=re[0],ie=re[1],le=function(e){if(n){var t=Object(W.d)(_);return new URLSearchParams({i:t,t:e})}return{}};Object(r.useEffect)((function(){var t=w.a.parse(e.asPath.split("?",2)[1]).i,n=t?Object(W.c)(C()(t,".yaml")?t:"".concat(t,".yaml"),"https://files.natureshare.org/"):null;if(v(n),n){Object(W.b)(n).then((function(e){e&&(Q(e),e.latitude&&e.longitude&&J({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:{id:Object(W.d)(n),title:(e.datetime||e.created_at).split("T")[0]}}]}))})),k(Object(W.c)("../../../items/index.json",n));var a=Object(W.c)("../../../profile.yaml",n);Object(W.b)(a).then((function(e){return e&&H(e)})),L(new URL(".",a).pathname.split("/",2)[1])}}),[]);var ce=Object(r.useMemo)((function(){return n&&j()(Object(W.d)(n),"./")?new URL(Object(W.d)(n),"https://github.com/".concat("natureshare/natureshare-files","/tree/master/")).href:null}),[n]);return $(z.a,{title:E,href:"/items?i=".concat(Object(W.d)(_))},$(q.d,null,V&&V.datetime&&V.datetime.replace("T"," ").replace("Z","")||V&&V.created_at&&V.created_at.replace("T"," ").replace("Z","")||"Loading..."),$(q.e,null,"by ",T&&T.name||E),V&&V.photos&&V.photos.length>0&&$(i.a,{mt:3,mb:3},$(l.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:2},x()(V.photos,["primary"]).map((function(e){var t=e.original_url,n=e.thumbnail_url,a=e.source,r=e.href,o=e.license;return $(l.a,{key:n,item:!0,xs:12,sm:6},$(c.a,null,$("a",{href:n,rel:"nofollow",style:{textDecoration:"none"}},$(u.a,null,$(s.a,{style:{height:"33vh"},image:n}))),$(f.a,null,$(p.a,{size:"small",onClick:function(){return ie(t),!0}},"Full Size"),a&&r&&$(p.a,{disabled:!r,size:"small",href:r,target:"_blank"},a||"Link"),o&&$(p.a,{disabled:!0,size:"small"},o))))}))),$(P.a,{open:oe,onClose:function(){return ie(!1)},fullWidth:!0,maxWidth:"sm"},$(F.a,null,"Show original photo?"),$(S.a,null,$(q.h,null,"File may be very large. Are you sure?")),$(I.a,null,$(p.a,{onClick:function(){window.location=oe}},"Ok"),$(p.a,{onClick:function(){return ie(!1)},autoFocus:!0},"Cancel")))),V&&V.videos&&V.videos.length>0&&$(ee,{title:"Video"},!ne&&$(p.a,{variant:"outlined",onClick:function(){return ae(!0)}},"Show Video"),ne&&V.videos.map((function(e){return $(K,Object(a.a)({key:e.thumbnail_url||"".concat(e.source).concat(e.id)},e))}))),V&&V.audio&&V.audio.length>0&&$(ee,{title:"Audio"},!ne&&$(p.a,{variant:"outlined",onClick:function(){return ae(!0)}},"Show Audio"),ne&&V.audio.map((function(e){var t=e.original_url;return $("audio",{key:t,controls:!0,src:t,style:{width:"100%"}},"[Audio Not Supported]")}))),V&&V.description&&V.description.length>0&&$(ee,{title:"Description"},$(q.h,null,V.description)),V&&V.id&&V.id.length>0&&$(ee,{title:"Identification"},$(h.a,{disablePadding:!0},V.id.map((function(e){return"string"===typeof e?{name:e.split("//",1)[0].trim()}:e})).map((function(e,t){var n=e.name,a=e.common,r=e.by;return $(g.a,{key:n,button:!0,divider:t+1!==V.id.length,component:D.a,href:"/items",as:"/items?".concat(le("id~".concat(n)))},$(b.a,{primary:n,secondary:$(o.a.Fragment,null,a&&$(q.a,null,a),r&&$(q.b,null,"id. by ",r))}))})))),V&&V.tags&&V.tags.length>0&&$(ee,{title:"Tags"},$(l.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:1},V.tags.map((function(e){return $(l.a,{item:!0,key:e},$(d.a,{label:e,variant:"outlined",onClick:function(){},component:D.a,href:"/items",as:"/items?".concat(le("tag~".concat(e))),style:{wordBreak:"break-all"}}))})))),V&&V.latitude&&V.longitude&&$(ee,{title:"Location"},V.location_name&&$(q.h,null,V.location_name),$(G.a,{geo:B})),V&&$(ee,{title:"Collections",actions:$(U.a,{title:"Add to Collection",url:window.location.href,action:"itemToCollection",target:n,fields:{collection:{label:"Collection Name",autoFocus:!0,inputLabelProps:{shrink:!0},multiline:!0,helperText:"Lowercase letters, numbers, dashes and underscores are allowed."}}})},$(h.a,{disablePadding:!0},(!V.collections||0===V.collections.length)&&$(g.a,null,$(b.a,{secondary:$("em",null,"None")})),V.collections&&V.collections.length>0&&V.collections.map((function(e,t){return $(g.a,{key:e,button:!0,divider:t+1!==V.collections.length,component:D.a,href:"/items",as:"/items?i=".concat(encodeURIComponent(Object(W.d)(Object(W.c)("../../../collections/".concat(e,"/aggregate/index.json"),n)))),style:{wordBreak:"break-all"}},$(b.a,{primary:e}))})))),V&&$(ee,{title:"Discussion",actions:$(U.a,{title:"Add a Comment",url:window.location.href,action:"itemComment",target:n,recipient:E,fields:{comment:{label:"Comment",autoFocus:!0,inputLabelProps:{shrink:!0},multiline:!0}}})},$(h.a,{disablePadding:!0},(!V.comments||0===V.comments.length)&&$(g.a,null,$(b.a,{secondary:$("em",null,"None")})),V.comments&&0!==V.comments.length&&V.comments.map((function(e,t){var n=e.created_at,a=e.username,r=e.text;return $(g.a,{key:a+n,divider:t+1!==V.comments.length},$(b.a,{primary:$(D.a,{href:"/profile",as:"/profile?i=".concat(encodeURIComponent("./".concat(a)))},a),secondary:$(o.a.Fragment,null,$(q.b,null,n&&n.split("T")[0]),$(q.a,null,'"',r,'"'))}))})))),V&&$(ee,{title:"Meta"},$(h.a,{disablePadding:!0},V.datetime&&$(g.a,null,$(b.a,{primary:"Observation",secondary:"".concat(V.datetime).replace("T"," ")})),V.photos&&V.photos.length>0&&$(o.a.Fragment,null,$(g.a,null,$(b.a,{primary:"Date-Time from Camera",secondary:V.photo_datetime_used?"Yes":"No"})),V.non_identifying_photo&&$(g.a,null,$(b.a,{primary:"Non-Identifying Photo",secondary:"Yes"})),V.photo_quality&&$(g.a,null,$(b.a,{primay:"Photo Quality",secondary:V.photo_quality}))),V.latitude&&V.longitude&&$(o.a.Fragment,null,$(g.a,null,$(b.a,{primary:"Location",secondary:"".concat(parseFloat(V.latitude).toFixed(6)," ").concat(parseFloat(V.longitude).toFixed(6))})),$(g.a,null,$(b.a,{primary:"Location from Camera (Geotag)",secondary:V.photo_geotag_used?"Yes":"No"}))),$(g.a,null,$(b.a,{primary:"Created",secondary:V.created_at&&V.created_at.split("T")[0]})),$(g.a,null,$(b.a,{primary:"Updated",secondary:V.updated_at&&V.updated_at.split("T")[0]})),$(g.a,null,$(b.a,{primary:"Photo(s) License",secondary:$(X,{license:V.photos&&V.photos.map((function(e){return e.license})).filter(Boolean).join(", ")||V.license})})),$(g.a,null,$(b.a,{primary:"Document License",secondary:$(X,{license:V.license})})))),$(i.a,{mt:3,mb:5,style:{textAlign:"center"}},$(m.a,{size:"small",variant:"outlined"},$(p.a,{href:n,target:"_blank",startIcon:$(Y.a,{type:"yaml"})},"YAML"),ce&&$(p.a,{href:ce,target:"_blank",startIcon:$(Y.a,{type:"git"})},"GitHub"),V&&V.source&&V.source.map((function(e){return $(p.a,{href:e.href,target:"_blank",startIcon:$(R.a,null)},e.name)})))))}},"qEN/":function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,((a=n("wvMB"))&&a.__esModule?a:{default:a}).default)("M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z");t.default=r},qQ6C:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/item",function(){return n("pPlg")}])},wclG:function(e,t,n){var a=n("pFRH"),r=n("88Gu")(a);e.exports=r},xweI:function(e,t,n){var a=n("XGnz"),r=n("alwl"),o=n("EA7m"),i=n("mv/X"),l=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),r(e,a(t,1),[])}));e.exports=l}},[["qQ6C",0,2,5,1,3,4,6,7,8,10]]]);